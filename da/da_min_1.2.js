/*
	author:	danny.xu
	date:	2011.2.12
	description:	da前台javascript辅助脚本库
	version: 1.2
*/
(function(f){_daToString=Object.prototype.toString;_daHasOwnProperty=Object.prototype.hasOwnProperty;Date.prototype.format=function(a){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S":this.getMilliseconds()};if(/(y+)/.test(a))a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));for(var k in o){if(new RegExp("("+k+")").test(a))a=a.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}return a};if(!Array.prototype.daIndexOf)Array.prototype.daIndexOf=function(a,i){i||(i=0);var b=this.length;if(i<0)i=b+i;var c=new RegExp(a,"g");var d=0;c.test(this);d=c.lastIndex;c.lastIndex=0;return d};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a,i){i||(i=0);var b=this.length;if(i<0)i=b+i;for(;i<b;i++)if(this[i]===a)return i;return-1};if(!Array.prototype.indexOf2)Array.prototype.indexOf2=function(a,i,j){i||(i=0);j||(j=1);var b=this.length;if(i<0)i=b+i;for(;i<b;i+=j)if(this[i]===a)return i;return-1};document.getElementsByName2=function(a,b){var c=document.getElementsByName(b);if(c.length>0)return c;c=new Array();var e=document.getElementsByTagName(a);for(var i=0;i<e.length;i++){if(e[i].getAttribute("name")==b){c[c.length]=e[i]}}return c}})(window);(function(l){var m=l.document;var n=function(a){return new n.fnStruct.init(a)},daDoc=null;n.fnStruct=n.prototype={version:"DA Library1.0  \n\nauthor: danny.xu\n\ndate: 2010-11-08\n\nThank you!!!",dom:null,length:0,init:function(a){this.dom=[];if(undefined!==a){this.findDOM(a)}},findDOM:function(a){var b=n.find(a);if(undefined!==b.length){this.dom=b}else{if(b)this.dom.push(b)}this.length=this.dom.length},pushDOM:function(a){var b=n();n.pushArray(a,b.dom);return b},each:function(a,b){return n.each(this.dom,a,b)},map:function(b){return this.pushDOM(n.map(this.dom,function(a,i){return b(a,i)}))}};n.fnStruct.init.prototype=n.prototype;l.da=n;var o=/^id:.+$/,daRe_name=/^name:.+$/,daRe_tag=/^tag:.+$/,daRe_class=/^class:.+$/;n.find=function(a){var b=[];if("string"===typeof a){var c=a.split(",");var d="";var e=null;for(var i=0,len=c.length;i<len;i++){d=c[i];if(o.test(d)){d=d.substring(d.indexOf(":")+1);e=m.getElementById(d);n.pushArray(e,b)}if(daRe_name.test(d)){d=d.substring(d.indexOf(":")+1);e=m.getElementsByName2(d);n.pushArray(e,b)}if(daRe_tag.test(d)){d=d.substring(d.indexOf(":")+1).toUpperCase();e=m.getElementsByTagName(d);n.pushArray(e,b)}}}else if(n.isFunction(a)){n.pushArray(daDoc.ready(a),b)}else{n.pushArray(a,b)}return b||undefined};n.each=function(a,b,c){var d,i=0,length=a.length,isObj=(length===undefined)||n.isFunction(a);if(c){if(isObj){for(d in a){if(b.apply(a[d],c)===false){break}}}else{for(;i<length;){if(b.apply(a[i++],c)===false){break}}}}else{if(isObj){for(d in a){if(b.call(a[d],d,a[d])===false){break}}}else{for(var e=a[0];i<length&&(b.call(e,i,e)!==false);e=a[++i]){}}}return a};n.map=function(a,b,c){var d=[],value=null;for(var i=0,length=a.length;i<length;i++){value=b(a[i],i,c);if(value!=null){d.push(value)}}return d.concat(d)};n.extend=n.fnStruct.extend=function(){var a=arguments[0]||{},i=1,length=arguments.length,deep=false,options=null,name=null,src=null,copy=null;if(typeof a==="boolean"){deep=a;a=arguments[1]||{};i=2}if(typeof a!=="object"){a={}}if(length===i){a=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=a[name];copy=options[name];if(a===copy){continue}if(deep&&copy&&(n.isPlainObj(copy)||n.isArray(copy))){var b=src&&(n.isPlainObj(src)||n.isArray(src))?src:n.isArray(copy)?[]:{};a[name]=n.extend(deep,b,copy)}else if(copy!==undefined){a[name]=copy}}}}return a};n.extend({isWin:function(a){return a&&typeof a==="object"&&"setInterval"in a},isDoc:function(a){return a.nodeType===9},isFunction:function(a){return _daToString.call(a)==="[object Function]"},isArray:function(a){return _daToString.call(a)==="[object Array]"},isPlainObj:function(a){if(!a||_daToString.call(a)!=="[object Object]"||a.nodeType||a.setInterval){return false}if(a.constructor&&!_daHasOwnProperty.call(a,"constructor")&&!_daHasOwnProperty.call(a.constructor.prototype,"isPrototypeOf")){return false}var b;for(b in a){}return b===undefined||_daHasOwnProperty.call(a,b)},isEmptyObj:function(a){for(var b in a){return false}return true},isNull:function(a,b){var c="";if(2==arguments.length)c=b;if((undefined==a)||(null==a)||("undefined"==a)||("NaN"==a)||("Infinity"==a)||("&nbsp;"==a)||("&#160;"==a)||(""===a)||(String.fromCharCode(160)===a))return c;else return a},isNaN:function(a){return a==null||!/\d/.test(a)||isNaN(a)},pushArray:function(a,b){b=b||[];var c=b.length,sIdx=0;if(a!=null){if(a.length==null||typeof a==="string"||n.isFunction(a)||n.isWin(a)){b.push(a)}else{if(typeof a.length==="number"){for(var d=a.length;sIdx<d;sIdx++){b[c++]=a[sIdx]}}else{while(a[sIdx]!==undefined){b[c++]=a[sIdx++]}}b.length=c}}return b}});n.extend({isMatch:function(a,b,c){if(c&&""===n.isNull(a,""))return true;else if(!c&&""===n.isNull(a,""))return false;else return b.test(a)},isInt:function(a,b){return n.isMatch(a,/^-?\d+$/,b)},isInt0Up:function(a,b){return n.isMatch(a,/^\d+$/,b)},isIntUp:function(a,b){return n.isMatch(a,/^[0-9]*[1-9][0-9]*$/,b)},isInt0Lower:function(a,b){return n.isMatch(a,/^((-\d+)|(0+))$/,b)},isIntLower:function(a,b){return n.isMatch(a,/^-[0-9]*[1-9][0-9]*$/,b)},isFloat:function(a,b){return n.isMatch(a,/^(-?\d+)(\.\d+)?$/,b)},isFloat0Up:function(a,b){return n.isMatch(a,/^\d+(\.\d+)?$/,b)},isFloatUp:function(a,b){return n.isMatch(a,/^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/,b)},isFloat0Lower:function(a,b){return n.isMatch(a,/^((-\d+(\.\d+)?)|(0+(\.0+)?))$/,b)},isFloatLower:function(a,b){return n.isMatch(a,/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/,b)},isLetter:function(a,b){return n.isMatch(a,/^[A-Za-z]+$/,b)},isLetterUpper:function(a,b){return n.isMatch(a,/^[A-Z]+$/,b)},isLetterLower:function(a,b){return n.isMatch(a,/^[a-z]+$/,b)},isNumLetter:function(a,b){return n.isMatch(a,/^[A-Za-z0-9]+$/,b)},isCode:function(a,b){return n.isMatch(a,/^\w+$/,b)},isCN:function(a,b){return n.isMatch(a,/^[\u4e00-\u9fa5]*$/,b)},isName:function(a,b){return n.isMatch(a,/^[a-zA-Z\u4e00-\u9fa5_]*$/,b)},isAccount:function(a,b){return n.isMatch(a,/^[\w\u4e00-\u9fa5]*$/,b)},isPhone:function(a,b){return n.isMatch(a,/^(((\+86)|(86))?(13[0-9]|15[0|1|2|3|5|6|7|8|9]|18[2|6|7|8|9])\d{8}|(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/,b)},isMobile:function(a,b){return n.isMatch(a,/^((\+86)|(86))?(13[0-9]|15[0|1|2|3|5|6|7|8|9]|18[2|6|7|8|9])\d{8}$/,b)},isIDCard:function(a,b){return n.isMatch(a,/^\d{18}|\d{15}$/,b)},isBankCard:function(a,b){return n.isMatch(a,/^\d{19}$/,b)},isEmail:function(a,b){return n.isMatch(a,/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,b)},isPostCode:function(a,b){return n.isMatch(a,/^[1-9]{1}(\d+){5}$/,b)},isIP:function(a,b){return n.isMatch(a,/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/,b)},isHTTP:function(a,b){return n.isMatch(a,/^[a-zA-z]+:(\/|\\){2}[^s]*$/,b)},isHTML:function(a,b){return n.isMatch(a,/<(S*?)[^>]*>.*?|< .*? \/>/,b)}});n.extend({getNavigator:function(){var a={},ua=navigator.userAgent.toLowerCase(),s;(s=ua.match(/msie ([\d.]+)/))?a.ie=s[1]:(s=ua.match(/firefox\/([\d.]+)/))?a.firefox=s[1]:(s=ua.match(/chrome\/([\d.]+)/))?a.chrome=s[1]:(s=ua.match(/opera.([\d.]+)/))?a.opera=s[1]:(s=ua.match(/version\/([\d.]+).*safari/))?a.safari=s[1]:0;var b=[];if(a.ie)b.push("IE: "+a.ie+"\n");if(a.firefox)b.push("Firefox: "+a.firefox+"\n");if(a.chrome)b.push("Chrome: "+a.chrome+"\n");if(a.opera)b.push("Opera: "+a.opera+"\n");if(a.safari)b.push("Safari: "+a.safari+"\n");return b.join("")},imgErr:function(a){a=a||"/logo.gif";imgObj.src=a},loadImage:function(a,b){var c=new Image();c.src=a;if(c.complete){b.call(c);return}c.onload=function(){b.call(c)}},urlParams:function(a){a=a||location.search.substring(1);var b=a.split("&");var c={};for(var i=0;i<b.length;i++){var d=b[i].indexOf('=');if(d==-1)continue;var e=b[i].substring(0,d);var f=b[i].substring(d+1);c[e]=f}return c},cookie:function(a,b,c,d,e,f){if(undefined==b){var g=document.cookie.indexOf(a+"="),len=g+a.length+1;if(g==-1)return null;if((!g)&&(a!=document.cookie.substring(0,a.length)))return null;var h=document.cookie.indexOf(';',len);if(h==-1)h=document.cookie.length;return unescape(document.cookie.substring(len,h))}var i=null,today=new Date();today.setTime(today.getTime());if(c)c=c*1000*60*60*24;i=new Date(today.getTime()+(c));document.cookie=[a,"=",escape(b),((c)?';expires='+i.toGMTString():''),((d)?';path='+d:''),((e)?';domain='+e:''),((f)?';secure':'')].join("")},deleteCookie:function(a,b,c){if(getCookie(a))document.cookie=a+'='+((b)?';path='+b:'')+((c)?';domain='+c:'')+';expires=Thu, 01-Jan-1970 00:00:01 GMT'},stopDefault:function(a){if(a&&a.preventDefault)a.preventDefault();else window.event.returnValue=false;return false}});var p=false,readyList=[];daDoc=n(m);if(m.addEventListener){DOMContentLoaded=function(){m.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);n.ready()}}else if(m.attachEvent){DOMContentLoaded=function(){if(m.readyState==="complete"){m.detachEvent("onreadystatechange",DOMContentLoaded);n.ready()}}}function doScrollCheck(){if(n.isReady){return}try{m.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}n.ready()};n.extend({isReady:false,readyWait:1,bindReady:function(){if(p){return}p=true;if(m.readyState==="complete"){return setTimeout(n.ready,1)}if(m.addEventListener){m.addEventListener("DOMContentLoaded",DOMContentLoaded,false);l.addEventListener("load",n.ready,false)}else if(m.attachEvent){m.attachEvent("onreadystatechange",DOMContentLoaded);l.attachEvent("onload",n.ready);var a=false;try{a=(l.frameElement==null)}catch(e){}if(m.documentElement.doScroll&&a){doScrollCheck()}}},ready:function(a){if(a===true){n.readyWait--}if(!n.readyWait||(a!==true&&!n.isReady)){if(!m.body){return setTimeout(n.ready,1)}n.isReady=true;if(a!==true&&(--n.readyWait>0)){return}if(readyList){var b,i=0,ready=readyList;readyList=null;while((b=ready[i++])){b.call(m,n)}if(n.fnStruct.trigger){n(m).trigger("ready").unbind("ready")}}}}});n.fnStruct.extend({ready:function(a){n.bindReady();if(n.isReady){a.call(m,jQuery)}else if(readyList){readyList.push(a)}return m}});n.extend({eventBind:function(a,b,c){c=c||false;var d=0,len=1,arrDOMs=[];arrDOMs.push(a);if("[object Array]"==_daToString.call(a)){arrDOMs=a;len=a.length};for(;d<len;d++){for(var e in b){if(arrDOMs[d].addEventListener){arrDOMs[d].addEventListener(e,b[e],c)}else if(arrDOMs[d].attachEvent){arrDOMs[d].attachEvent("on"+e,b[e])}else{arrDOMs[d]['on'+e]=b[e]}}}},eventRemove:function(a,b,c,d){d=d||false;var e=0,len=1,arrDOMs=[];arrDOMs.push(a);if("[object Array]"==_daToString.call(a)){arrDOMs=a;len=a.length};for(;e<len;e++){for(var f in objEvents){if(arrDOMs[e].removeEventListener){arrDOMs[e].removeEventListener(f,objEvents[f],d)}else if(arrDOMs[e].detachEvent){arrDOMs[e].detachEvent("on"+f,objEvents[f])}else{arrDOMs[e]['on'+f]=null}}}}});var q=m.createElement("div");q.innerHTML="<a style='color:red;float:left;opacity:.55;'>a</a>";var a=q.getElementsByTagName("a")[0];if(!a)return;n.support={};n.support={opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,getComputedStyle:m.defaultView&&m.defaultView.getComputedStyle,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};n(function(){var a=m.createElement("div");a.style.width=a.style.paddingLeft="1px";m.body.appendChild(a);n.boxModel=n.support.boxModel=a.offsetWidth===2;if("zoom"in a.style){a.style.display="inline";a.style.zoom=1;n.support.inlineBlockNeedsLayout=a.offsetWidth===2;a.style.display="";a.innerHTML="<div style='width:4px;'></div>";n.support.shrinkWrapBlocks=a.offsetWidth!==2}a.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var b=a.getElementsByTagName("td");n.support.reliableHiddenOffsets=b[0].offsetHeight===0;b[0].style.display="";b[1].style.display="none";n.support.reliableHiddenOffsets=n.support.reliableHiddenOffsets&&b[0].offsetHeight===0;a.innerHTML="";m.body.removeChild(a).style.display="none";a=b=null});var r=/z-?index|font-?weight|opacity|zoom|line-?height/i,daRe_alpha=/alpha\([^)]*\)/,daRe_opacity=/opacity=([^)]*)/,daRe_float=/float/i,daRe_dashAlpha=/-([a-z])/ig,daRe_upper=/([A-Z])/g,daRe_numpx=/^-?\d+(?:px)?$/i,daRe_num=/^-?\d/;n.fnStruct.extend({css:function(d,e){return n.access(this.dom,d,e,true,function(a,b,c){if(undefined===c){return n.curCSS(a,b)}if("number"===typeof c&&!r.test(b)){c+="px"}n.style(a,b,c)})}});n.extend({curCSS:function(c,d,e){var f,style=c.style,filter;if(!n.support.opacity&&"opacity"===d&&c.currentStyle){f=daRe_opacity.test(c.currentStyle.filter||"")?((parseFloat(RegExp.$1)/100)+""):"";return(""===f)?"1":f}if(daRe_float.test(d))d=n.support.cssFloat?"cssFloat":"styleFloat";if(!e&&style&&style[d]){f=style[d]}else if(n.support.getComputedStyle){if(daRe_float.test(d)){d="float"}d=d.replace(daRe_upper,"-$1").toLowerCase();var g=c.ownerDocument.defaultView;if(!g){return null}var h=g.getComputedStyle(c,null);if(h){f=h.getPropertyValue(d)}if("opacity"===d&&""===f){f="1"}}else if(c.currentStyle){var i=d.replace(daRe_dashAlpha,function(a,b){return b.toUpperCase()});f=c.currentStyle[d]||c.currentStyle[i];if(!(daRe_numpx.test(f))&&(daRe_num.test(f))){var j=style.left,rsLeft=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;style.left=("fontSize"===i)?"1em":(f||0);f=style.pixelLeft+"px";style.left=j;c.runtimeStyle.left=rsLeft}}return f},access:function(a,b,c,d,e,f){var g=a.length;if("object"===typeof b){for(var k in b){n.access(a,k,b[k],d,e,c)}return a}if(undefined!==c){d=!f&&d&&n.isFunction(c);for(var i=0;i<g;i++){e(a[i],b,(d?c.call(a[i],i,e(a[i],b)):c),f)}return a}return g?e(a[0],b):undefined},swap:function(a,b,c){var d={};for(var e in b){d[e]=a.style[e];a.style[e]=b[e]}c.call(a);for(var e in b){a.style[e]=d[e]}},css:function(a,b,c,d){if(b==="width"||b==="height"){var e,props={position:"absolute",visibility:"hidden",display:"block"},which=("width"===b?["Left","Right"]:["Top","Bottom"]);function getWH(){e=b==="width"?a.offsetWidth:a.offsetHeight;if(d==="border"){return}for(var s=0,len=which.length;s<len;s++){if(!d){e-=parseFloat(n.curCSS(a,"padding"+s,true))||0}if(d==="margin"){e+=parseFloat(n.curCSS(a,"margin"+s,true))||0}else{e-=parseFloat(n.curCSS(a,"border"+s+"Width",true))||0}}}if(a.offsetWidth!==0){getWH()}else{n.swap(a,props,getWH)}return Math.max(0,Math.round(e))}return n.curCSS(a,b,c)},style:function(c,d,e){if(!c||!c.style||c.nodeType===3||c.nodeType===8){return undefined}if(("width"===d||"height"===d)&&parseFloat(e)<0){e=undefined}var f=c.style||c,set=e!==undefined;if(!n.support.opacity&&"opacity"===d){if(set){f.zoom=1;var g="NaN"===(parseInt(e,10)+"")?"":("alpha(opacity="+e*100+")");var h=f.filter||n.curCSS(c,"filter")||"";f.filter=daRe_alpha.test(h)?h.replace(daRe_alpha,g):g}return(f.filter&&0<=f.filter.indexOf("opacity="))?((parseFloat(daRe_opacity.exec(f.filter)[1])/100)+""):""}if(daRe_float.test(d))d=n.support.cssFloat?"cssFloat":"styleFloat";d=d.replace(daRe_dashAlpha,function(a,b){return b.toUpperCase()});if(set)f[d]=e;return f[d]}});n.each(["Height","Width"],function(i,e){var f=e.toLowerCase();n.fnStruct["inner"+e]=function(){return this.dom[0]?parseFloat(n.css(this.dom[0],f,"padding")):null};n.fnStruct["outer"+e]=function(a){return this.dom[0]?parseFloat(n.css(this.dom[0],f,a?"margin":"border")):null};n.fnStruct[f]=function(b){var c=this.dom[0];if(!c){return b==null?null:this}if(n.isFunction(b)){return this.each(function(i){var a=n(this);a[f](b.call(this,i,a[f]()))})}if(n.isWin(c)){return(c.document.compatMode==="CSS1Compat"&&c.document.documentElement["client"+e])||c.document.body["client"+e]}else if(n.isDoc(c)){return Math.max(c.body["scroll"+e],c.body["offset"+e],c.documentElement["client"+e],c.documentElement["scroll"+e],c.documentElement["offset"+e])}else if(b===undefined){var d=n.css(c,f),ret=parseFloat(d);return n.isNaN(ret)?d:ret}else{return this.css(f,typeof b==="string"?b:b+"px")}}});n.offset={initialize:function(){var a=document.body,container=document.createElement("div"),innerDiv,checkDiv,table,td,bodyMarginTop=parseFloat(n.curCSS(a,"marginTop",true))||0,strHTML=["<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'>","<div></div>","</div>","<table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'>","<tr><td></td></tr>","</table>"];n.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});container.innerHTML=strHTML;a.insertBefore(container,a.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position="fixed",checkDiv.style.top="20px";this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position=checkDiv.style.top="";innerDiv.style.overflow="hidden",innerDiv.style.position="relative";this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(a.offsetTop!==bodyMarginTop);a.removeChild(container);a=container=innerDiv=checkDiv=table=td=null;n.offset.initialize=function(){}},getBodyOffset:function(a){var b=a.offsetTop,left=a.offsetLeft;n.offset.initialize();if(n.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(n.curCSS(a,"marginTop",true))||0;left+=parseFloat(n.curCSS(a,"marginLeft",true))||0}return{top:b,left:left}},setOffset:function(a,b,i){if(/static/.test(n.curCSS(a,"position"))){a.style.position="relative"}var c=n(a),curOffset=c.offset(),curTop=parseInt(n.curCSS(a,"top",true),10)||0,curLeft=parseInt(n.curCSS(a,"left",true),10)||0;if(n.isFunction(b)){b=b.call(a,i,curOffset)}var d={top:(b.top-curOffset.top)+curTop,left:(b.left-curOffset.left)+curLeft};if("using"in b){b.using.call(a,d)}else{c.css(d)}}};n.fnStruct.extend({pos:function(){if(!this.dom[0]){return null}var a=this.dom[0],offsetParent=this.posInParent();offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent.dom[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(n.curCSS(a,"marginTop",true))||0;offset.left-=parseFloat(n.curCSS(a,"marginLeft",true))||0;parentOffset.top+=parseFloat(n.curCSS(offsetParent.dom[0],"borderTopWidth",true))||0;parentOffset.left+=parseFloat(n.curCSS(offsetParent.dom[0],"borderLeftWidth",true))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},posInParent:function(){return this.map(function(){var a=this.offsetParent||document.body;while(a&&(!/^body|html$/i.test(a.nodeName)&&n.css(a,"position")==="static")){a=a.offsetParent}return a})},offset:function(a){var b=this.dom[0];if(a){return this.each(function(i){n.offset.setOffset(this,a,i)})}if(!b||!b.ownerDocument){return null}if(b===b.ownerDocument.body){return n.offset.getBodyOffset(b)}var c=b.getBoundingClientRect(),m=b.ownerDocument,body=m.body,docElem=m.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=c.top+(self.pageYOffset||n.support.boxModel&&docElem.scrollTop||body.scrollTop)-clientTop,left=c.left+(self.pageXOffset||n.support.boxModel&&docElem.scrollLeft||body.scrollLeft)-clientLeft;return{top:top,left:left}}});var t="da"+(new Date).getTime(),_sequence=0,_winData={};n.extend({nowId:function(){return(new Date).getTime()},daData:{},identifier:t,data:function(a,b,c){a=(a==l)?_winData:a;var d=a[n.identifier];var e=n.daData;if(!d)d=++_sequence;if(n.isPlainObj(b)){a[n.identifier]=d;e[d]=e[d]||{};n.extend(true,e[d],b)}else if(!e[d]){a[n.identifier]=d;e[d]={}}if(c!==undefined)e[d][b]=c;return"string"===typeof b?e[d][b]:e[d]},undata:function(a,b){a=(a==l)?_winCache:a;var c=a[n.identifier],daData=n.daData;if(b){if(daData[c]){delete daData[c][b];if(n.isEmptyObj(daData[c])){n.unData(a)}}}else{try{delete a[n.identifier]}catch(e){if(a.removeAttribute){a.removeAttribute(n.identifier)}}delete daData[c]}}});n.extend({delHtmlTag:function(a){return a.replace(/<\/?.+?>/g,"")},subString:function(a,b){return a.length>b?a.substring(0,b-3)+"…":a}});n.extend({testTime:null,testA:function(){n.testTime=new Date()},testB:function(){var a=new Date();return["耗时：",(a-n.testTime),"ms"].join("")},copy:function(a,b){b=b||"Text";if(l.clipboardData){l.clipboardData.clearData();return(l.clipboardData.setData(b,a))}else if(navigator.userAgent.indexOf("Opera")!=-1){window.location=a}else if(l.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){alert("被浏览器拒绝！\n请在浏览器地址栏输入'about:config'并回车\n然后将[ signed.applets.codebase_principal_support ]设置为'true'");return false}var c=Components.classes['@mozilla.org/widget/clipboard;1'].createInstance(Components.interfaces.nsIClipboard);if(!c)return;var d=Components.classes['@mozilla.org/widget/transferable;1'].createInstance(Components.interfaces.nsITransferable);if(!d)return;d.addDataFlavor('text/unicode');var f=new Object(),len=new Object(),copytext=a;f=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);f.data=copytext;d.setTransferData("text/unicode",f,copytext.length*2);var g=Components.interfaces.nsIClipboard;if(!c)return false;c.setData(d,null,g.kGlobalClipboard);alert("复制成功！")}return false}})})(window);