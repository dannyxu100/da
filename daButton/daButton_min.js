/*
	author: danny.xu
	date: 	2011-5-9 13:45:03
	discription:	增强版按钮daButton	
*/
(function(f){var g=f.document;var h=function(a){if(da.isFunction(a)||"string"===typeof a)return h.getButton(a);return new h.fnStruct.init(a)};h.fnStruct=h.prototype={version:"daButton 1.0 \n\nauthor: danny.xu\n\ndate: 2011-5-9 21:18:27\n\n Thanks!",bId:0,bObj:null,bParentObj:null,bTableObj:null,bContainerObj:null,bClientObj:null,setting:{parent:null,id:null,width:0,height:0,color:"#c2c2c2,#949494,#999",html:"按&nbsp;&nbsp;钮",name:"",type:"button",css:{button:"daButton",tb:"tb_daButton",tb2:"tb_daButton2",tb3:"tb_daButton3"},click:null,dblclick:null,mouseover:da.noop,mouseout:da.noop,mousedown:da.noop,mouseup:da.noop},daBtArrColor:null,isStopDefault:false,maxheight:100,init:function(a){this.setting=a=da.extend(true,{},this.setting,a);if(a.id)this.bId=a.id;else while(null!==g.getElementById("daBtButton_"+this.bId))this.bId++;this.bParentObj=da(a.parent);this.bParentObj=0<this.bParentObj.dom.length?this.bParentObj.dom[0]:g.body;this.daBtArrColor=a.color.split(",");this.create();if(!this.setting.width||!this.setting.height){var b=g.createElement("DIV");b.style.cssText="position:absolute;padding:3px;";g.body.insertBefore(b);b.innerHTML=this.setting.html;this.setting.width=da(b).width();this.setting.height=da(b).height();da(b).remove()}this.reSize();this.html(this.setting.html);this.bindEvent();h.pushCache(this);return this},create:function(){var a,sType;try{sType=(this.setting.name?(' name="'+this.setting.name+'" '):'')+(this.setting.type?(' type="'+this.setting.type+'" '):'');a=g.createElement('<button '+sType+' ></button>')}catch(e){}if(!a){a=g.createElement('button');a.setAttribute('type','button');if(this.setting.name)a.setAttribute('name',this.setting.name)}a.className=this.setting.css.button;a.id=this.setting.id||"daBtButton_"+this.bId;da(a).attr("daButton",0);a.innerHTML=['<table id="daBtTable_',this.bId,'" class="tb_daButton" border="0" cellspacing="0" cellpadding="0">','<tr>','<td class="tl"></td>','<td class="top"></td>','<td class="tr"></td>','</tr>','<tr>','<td class="left"></td>','<td class="mid">','<div id="daBtContainer_',this.bId,'" class="container" >','<div id="daBtClient_',this.bId,'" class="client" ></div>','</div>','</td>','<td class="right"></td>','</tr>','<tr>','<td class="bl"></td>','<td class="bottom"></td>','<td class="br"></td>','</tr>','</table>',].join("");this.bParentObj.insertBefore(a);this.bObj=a;a=null;this.bTableObj=g.getElementById("daBtTable_"+this.bId);this.bContainerObj=g.getElementById("daBtContainer_"+this.bId);this.bClientObj=g.getElementById("daBtClient_"+this.bId);if("7.0"===da.browser.ie)this.bContainerObj.style.top="2px"},bindEvent:function(){var d=this.setting,context=this;da.each(["mouseover","mouseout","mousedown","mouseup","click","dblclick"],function(b,c){if(!d[c]||!da.isFunction(d[c]))return;da(context.bObj).bind(c,function(a){if(false===d[c].call(this,a,context)||context.isStopDefault)return;switch(c){case"mouseover":context.over();break;case"mouseout":context.out();break;case"mousedown":context.down();break;case"mouseup":context.up();context.blur();break}})})},setStopDefault:function(a){this.isStopDefault=da.isNull(a,false)},reSize:function(a,b){a=(a||this.setting.width).toString();b=(b||this.setting.height).toString();a=a.replace("px","");b=b.replace("px","");b=parseInt(this.maxheight<b?this.maxheight:b,10);this.bContainerObj.style.width=a+"px";this.bClientObj.style.width=a+"px";this.bContainerObj.style.height=b+"px";this.bClientObj.style.height=b+"px"},html:function(a){if(a){this.bClientObj.innerHTML=a;return this}return this.bClientObj.innerHTML},color:function(a){this.setting.color=a;this.daBtArrColor=a.split(",")},hide:function(){if("undefined"!==daFx)da(this.bObj).fadeOut(300);else this.bObj.style.display="none"},show:function(){if("undefined"!==daFx)da(this.bObj).fadeIn(300);else this.bObj.style.display="block"},down:function(){this.bTableObj.className=this.setting.css.tb3;this.bTableObj.style.backgroundColor=this.daBtArrColor[2]},up:function(){this.bTableObj.className=this.setting.css.tb;this.bTableObj.style.backgroundColor=this.daBtArrColor[0]},over:function(){this.bTableObj.className=this.setting.css.tb2;this.bTableObj.style.backgroundColor=this.daBtArrColor[1]},out:function(){this.bTableObj.className=this.setting.css.tb;this.bTableObj.style.backgroundColor=this.daBtArrColor[0]},blur:function(){this.bObj.blur()},focus:function(){this.bObj.focus()}};h.fnStruct.init.prototype=h.prototype;h.pushCache=function(a){da.data(a.bObj,"daButtonObj",a)};h.getButton=function(a){if("string"===typeof a&&0!==a.indexOf("#"))a="#"+a;var b=da(a);if(0>=b.dom.length)return null;return da.data(b.dom[0],"daButtonObj")};h.reSize=function(a,b,c){if("string"==typeof a){a=h.getButton(a)}else if(a.nodeType){a=h.getButton(a.id)}if(null===a)return null;a.reSize(b,c);return a};h.html=function(a,b){if("string"==typeof a){a=h.getButton(a)}else if(a.nodeType){a=h.getButton(a.id)}if(!a)return null;return a.html(b)};inlineEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick"];h.toButton=function(c){var d=da(c);d.each(function(){if(0==da(this).attr("daButton"))return;var a={},eventType="",bObj=null;for(var n=0,len=inlineEvents.length;n<len;n++){eventType="on"+inlineEvents[n];if(da.isFunction(this[eventType]))a[inlineEvents[n]]=this[eventType]}var b={id:this.id,parent:this.parentNode.id||null,width:da(this).width(),height:da(this).height(),html:(this.value||this.innerHTML)};b=da.extend({},b,a);bObj=h(b);this.parentNode.replaceChild(bObj.bObj,this)})};f.daButton=f.dadaBt=h})(window);function convertbutton(a){daButton.toButton(a)}