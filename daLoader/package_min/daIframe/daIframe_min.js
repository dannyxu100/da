/*
	author: danny.xu
	date:		2011-8-9 16:31:00
	description: 	daIframe现场保留
*/
(function(k,l){var m=k.document;k.daIframeCache=[];var n=(function(){var j=function(){return new j.fnStruct.init()};j.fnStruct=j.prototype={version:"daIframe1.0  \n\nauthor: danny.xu\n\ndate: 2011-8-9 16:49:21 \n\nThank you!!!",isSelfWinCache:true,extendWidth:0,extendHeight:0,init:function(){return this},getCache:function(a){var b=k.daIframeCache;for(var i=0,len=b.length;i<len;i++){if(a==b[i].code)return b[i]}return null},pushCache:function(a,b,c){var d=k.daIframeCache,cacheObj={code:a,iframe:b,loaded:false,history:[b.src],status:c,current:0};d.push(cacheObj);return cacheObj},removeCache:function(a){var b=k.daIframeCache,isClearAll=!a;if(isClearAll){b=[];return};for(var i=0,len=b.length;i<len;i++){if(a==b[i].code){b[i].iframe.src='javascript:false;';try{var c=b[i].iframe.contentWindow;c.document.write('');c.document.clear();if("undeinfed"!==typeof CollectGarbage)setTimeout(CollectGarbage,1)}catch(e){};b[i].iframe.onreadystatechange=null;b[i].iframe.onload=null;da(b[i].iframe).remove();b.splice(i,1);break}}},find:function(a,b){b=b||k;var c=b.daIframeCache;for(var i=0,len=c.length;i<len;i++){if(a===c[i].status)return c[i]}if(0<c.length){c[c.length-1].status=a;return c[c.length-1]};var d=b.document.getElementById("mainframe");if(d&&"IFRAME"==d.tagName){var e=document.createElement("div"),cacheList=document.createElement("div");e.id="daIframeContainer";e.style.cssText="position:relative;overflow:hidden;";d.parentNode.insertBefore(e,d);cacheList.id="daIframeList";cacheList.style.cssText="position:relative;top:0px;left:0px;overflow-y:hidden;";cacheList.insertBefore(d,null);e.insertBefore(cacheList,null);d.style.width=document.body.offsetWidth+"px";d.style.cssFloat=d.style.styleFloat="left";c=this.pushCache("mainframe",d,a);c.loaded=true;j.cacheCntObj=e;j.cacheListObj=cacheList;j.listWidth=document.body.offsetWidth;return c}else if(b.parent&&null!=b.frameElement&&b!=b.parent){this.isSelfWinCache=false;return this.find(a,b.parent)}else return null},goto:function(a,b,c,d){d=d||"show";b=da.firstValue(b,false);var e=this.find(d),cacheObj,newObj,newIframe,pageName,idx;pageName=j.urlToCode(a);if("undefined"!=typeof da)pageName=da.isNull(pageName,null);if(!e){location.href=a;this.autoSize(d)}if(!a||!pageName){goto("/error.htm");return false}var f=j.cacheCntObj||document.getElementById("daIframeContainer"),cacheListObj=j.cacheListObj||document.getElementById("daIframeList");if("undefined"!==typeof daLoading){if(j.daLoadingObj){j.daLoadingObj.finished();j.daLoadingObj=null}j.daLoadingObj=daLoading({parent:f,type:"gif",click:function(){this.finished()}})}if(!this.isSelfWinCache){e.iframe.src=a;e.history.unshift(a);e.loaded=false;this.autoSize(d);return true}e.status="cache";j.pageOut(e,cacheListObj,f);if(!c){c=pageName}if(!c)return false;var g="cacheIframe_"+(new Date).getTime();cacheObj=this.getCache(c);if(null===cacheObj){newIframe=e.iframe.cloneNode(true);newIframe.id=g;newIframe.style.cssText="float:left;display:none;";newIframe.onreadystatechange=null;newIframe.onload=null;cacheListObj.insertBefore(newIframe,null);newIframe.src=a;newObj=this.pushCache(c,newIframe,d);this.autoSize()}else if(true===b){newIframe=e.iframe.cloneNode(true);newIframe.id=g;newIframe.style.cssText="float:left;display:none;";newIframe.onreadystatechange=null;newIframe.onload=null;cacheListObj.insertBefore(newIframe,null);newIframe.src=a;var h=this.getCache(c);if(j.listWidth&&h){j.listWidth-=h.iframe.offsetWidth}this.removeCache(c);newObj=this.pushCache(c,newIframe,d)}else{cacheObj.status=d;newObj=cacheObj;newIframe=cacheObj.iframe}this.autoSize(d);j.pageIn(newObj,cacheListObj,f);return true},autoSize:function(a,b){a=a||"show";b=b||k;var c=this.find(a,b);if(!c)return;var d=this,curIframe=c.iframe,isIE=da.browser.ie,ScrollBarSize={width:isIE?16:0,height:isIE?16:0},defaultSize={},winSize={width:0,height:0};if(curIframe){defaultSize.width=curIframe.getAttribute("defaultwidth")||"0";defaultSize.height=curIframe.getAttribute("defaultheight")||"0";defaultSize.width=parseInt(defaultSize.width.toLowerCase().replace("px",""));defaultSize.height=parseInt(defaultSize.height.toLowerCase().replace("px",""));curIframe.style.width=(b.document.body.offsetWidth+this.extendWidth)+"px";if("complete"===curIframe.readyState||c.loaded){setIframeSize();return}curIframe.onreadystatechange=function(){if("complete"==this.readyState){setIframeSize()}};curIframe.onload=function(){ScrollBarSize.width=0;setIframeSize()};function setIframeSize(){if(j.daLoadingObj){j.daLoadingObj.finished();j.daLoadingObj=null}try{if(curIframe.contentDocument&&"undefined"!=typeof curIframe.contentDocument.body&&curIframe.contentDocument.body.offsetHeight){winSize.width=curIframe.contentDocument.body.offsetWidth;winSize.height=curIframe.contentDocument.body.offsetHeight}else if("undefined"!=typeof curIframe.contentWindow.document&&curIframe.contentWindow.document&&curIframe.contentWindow.document.body.scrollHeight){winSize.width=curIframe.contentWindow.document.body.scrollWidth;winSize.height=curIframe.contentWindow.document.body.scrollHeight}}catch(e){}if(defaultSize.width&&winSize.width<defaultSize.width)winSize.width=defaultSize.width;if(defaultSize.height&&winSize.height<defaultSize.height)winSize.height=defaultSize.height;if(winSize.height){curIframe.style.height=(winSize.height+ScrollBarSize.height+d.extendHeight)+"px"}c.loaded=true;d.reSize(b,curIframe);if(b.parent&&null!=b.frameElement){b.parent.autoSize(a,b.parent)}}}},reSize:function(a,b){a=a||k;var c=a.daIframeCache,cacheListObj=a.daIframe.cacheListObj||a.document.getElementById("daIframeList"),cacheListWidth=0,cacheListHeight=0;if(!cacheListObj){return}for(var i=0,len=c.length;i<len;i++){cacheListWidth=cacheListWidth+(c[i].loaded?c[i].iframe.offsetWidth:0)}cacheListHeight=b.offsetHeight;if(500>=cacheListHeight)cacheListHeight=500;cacheListObj.style.width=cacheListWidth+"px";cacheListObj.style.height=cacheListHeight+"px";a.daIframe.listWidth=cacheListWidth;a.daIframe.listHeight=cacheListHeight}};j.fnStruct.init.prototype=j.prototype;j.urlToCode=function(a){var b=a;idx=a.lastIndexOf("/");if(idx>=0)b=a.substr(idx+1);idx=b.indexOf("?");if(idx>=0)b=b.substr(0,idx);return b};j.remove=function(a,b,c){var d=j(),cacheObj=d.getCache(a);if(j.listWidth&&cacheObj){j.listWidth-=cacheObj.iframe.offsetWidth}d.removeCache(a);d.autoSize(b,c)};j.refresh=function(a,b){a=a||"show";b=b||k;var c=j(),currentObj=c.find(a);if("unknown"!=typeof currentObj.iframe.contentWindow.document&&currentObj.iframe.contentWindow.document){currentObj.iframe.contentWindow.location.reload()}else{c.goto(currentObj.iframe.src,true,currentObj.code,currentObj.status)}};j.back=function(a,b,c,d){if("number"===typeof a){d=c;c=b;b=a;a=k}c=c||"show";a=a||k;var e=j(),currentObj=e.find(c,a);if(!currentObj)return false;if(!b&&0!==b)b=currentObj.current+(d?-1:1);if(0>b||(currentObj.history.length-1)<b)return false;currentObj.iframe.src=currentObj.history[b];currentObj.current=b};j.pageOut=function(a,b,c){a.iframe.style.visibility="hidden"};j.pageIn=function(a,b,c){a.iframe.style.display="block";a.iframe.style.visibility="visible";var d=-a.iframe.offsetLeft;if(!a.loaded)d=-j.listWidth;b.style.left=d+"px"};return j})();k.daIframe=n})(window);goto=function(a,b,c,d){daIframe().goto(a,b,c,d)};autoSize=function(a,b){daIframe().autoSize(a,b)};autoframeheight=function(){if("undefined"!=typeof daFrameAutoSize)daFrameAutoSize();else autoSize()};iframeRemove=function(a){daIframe.remove(daIframe.urlToCode(a))};iframeRefresh=function(){daIframe.refresh()};iframeBack=function(a,b,c,d){daIframe.back(a,b,c,d)};iframeForward=function(a,b,c,d){daIframe.back(a,b,c,true)};if("undefined"!==typeof da&&da.fnStruct.act){daIframe.act=true;daIframe.createPointer=function(){var a=daIframe.cacheCntObj||document.getElementById("daIframeContainer");if(!a)return;if(!a.style.position)a.style.position="relative";daIframe.pagePointer={left:document.createElement("div"),right:document.createElement("div")};daIframe.pagePointer.left.style.cssText=daIframe.pagePointer.right.style.cssText="position:absolute; top:45%; width:48px;height:48px;background:url(/main/images/daIframe_pagePointer.png);display:none;";daIframe.pagePointer.left.style.left="20px";daIframe.pagePointer.right.style.right="20px";daIframe.pagePointer.right.style.backgroundPosition="-48px 0px";a.insertBefore(daIframe.pagePointer.left,null);a.insertBefore(daIframe.pagePointer.right,null)};daIframe.pageOut=function(a,b,c){a.iframe.style.visibility="hidden"};daIframe.pageIn=function(a,b,c,d){var e=(!a.loaded)?(-daIframe.listWidth):(-a.iframe.offsetLeft);a.iframe.style.visibility="visible";if(!daIframe.act||!a.loaded){da(a.iframe).fadeIn(300);b.style.left=e+"px"}else{if(!daIframe.pagePointer)daIframe.createPointer();else{if(e<b.offsetLeft)daIframe.pagePointer.right.style.display="block";else if(e>b.offsetLeft)daIframe.pagePointer.left.style.display="block"}da(b).stop().act({left:e},{duration:300,easing:"easeInQuad",complete:function(){if(daIframe.pagePointer){daIframe.pagePointer.right.style.display="none";daIframe.pagePointer.left.style.display="none"}}})}}}
